<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#ec4899">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>üéÄ –°—é—Ä–ø—Ä–∏–∑ –¥–ª—è —Ç–µ–±—è!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            min-height: 100dvh;
            background: linear-gradient(135deg, #fce7f3 0%, #ddd6fe 50%, #c7d2fe 100%);
            overflow: hidden;
            user-select: none;
        }

        /* –§–æ–Ω–æ–≤—ã–µ —É–∫—Ä–∞—à–µ–Ω–∏—è */
        .bg-decorations {
            position: fixed;
            inset: 0;
            pointer-events: none;
            overflow: hidden;
        }

        .bg-item {
            position: absolute;
            animation: float 6s ease-in-out infinite;
            opacity: 0.4;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
        }

        /* –≠–∫—Ä–∞–Ω—ã */
        .screen {
            display: none;
            min-height: 100dvh;
            padding: 20px;
            align-items: center;
            justify-content: center;
        }

        .screen.active {
            display: flex;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ */
        .card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 32px;
            max-width: 400px;
            width: 100%;
            text-align: center;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        /* –ü–æ–¥–∞—Ä–æ–∫ */
        .gift {
            font-size: 80px;
            animation: bounce 1s ease-in-out infinite;
            display: inline-block;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        h1 {
            font-size: 28px;
            background: linear-gradient(to right, #ec4899, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 16px 0;
        }

        p {
            color: #6b7280;
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .hint {
            background: linear-gradient(to right, #fdf2f8, #ede9fe);
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 14px;
            margin: 16px 0;
        }

        /* –ö–Ω–æ–ø–∫–∞ */
        .btn {
            background: linear-gradient(to right, #ec4899, #8b5cf6);
            color: white;
            border: none;
            padding: 16px 40px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 30px -5px rgba(236, 72, 153, 0.5);
            margin-top: 16px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px -5px rgba(236, 72, 153, 0.6);
        }

        .btn:active {
            transform: scale(0.98);
        }

        /* –ò–≥—Ä–∞ */
        #game-screen {
            position: relative;
            padding: 0;
        }

        .game-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .game-title {
            font-size: 18px;
            font-weight: 600;
            color: #1f2937;
            text-align: center;
        }

        .progress-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .progress-bar {
            flex: 1;
            height: 16px;
            background: #e5e7eb;
            border-radius: 50px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #ec4899, #8b5cf6);
            border-radius: 50px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .score-display {
            font-size: 16px;
            font-weight: 700;
            color: #ec4899;
            min-width: 50px;
            text-align: right;
        }

        .game-area {
            position: fixed;
            inset: 0;
            padding-top: 90px;
            touch-action: none;
        }

        .heart {
            position: absolute;
            cursor: pointer;
            transition: transform 0.1s;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
            z-index: 10;
        }

        .heart:active {
            transform: scale(1.3);
        }

        @keyframes pop {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); }
            100% { transform: scale(0); opacity: 0; }
        }

        .heart.caught {
            animation: pop 0.3s ease-out forwards;
            pointer-events: none;
        }

        /* –û—Ç–∫—Ä—ã—Ç–∫–∞ */
        .postcard {
            background: linear-gradient(135deg, #fff 0%, #fdf2f8 50%, #fce7f3 100%);
            border-radius: 24px;
            padding: 40px 32px;
            max-width: 420px;
            width: 100%;
            text-align: center;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.2);
            animation: cardAppear 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        @keyframes cardAppear {
            from { opacity: 0; transform: scale(0.5) rotateY(90deg); }
            to { opacity: 1; transform: scale(1) rotateY(0); }
        }

        .postcard h1 {
            font-size: 32px;
            margin-bottom: 20px;
        }

        .postcard-emoji {
            font-size: 64px;
            margin-bottom: 20px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .postcard-text {
            font-size: 18px;
            color: #4b5563;
            line-height: 1.8;
            margin-bottom: 24px;
        }

        .postcard-footer {
            display: flex;
            justify-content: center;
            gap: 12px;
            font-size: 32px;
            margin-top: 20px;
        }

        .footer-emoji {
            animation: wave 1s ease-in-out infinite;
        }

        .footer-emoji:nth-child(2) { animation-delay: 0.1s; }
        .footer-emoji:nth-child(3) { animation-delay: 0.2s; }
        .footer-emoji:nth-child(4) { animation-delay: 0.3s; }
        .footer-emoji:nth-child(5) { animation-delay: 0.4s; }

        @keyframes wave {
            0%, 100% { transform: translateY(0) rotate(0); }
            25% { transform: translateY(-8px) rotate(-5deg); }
            75% { transform: translateY(-4px) rotate(5deg); }
        }

        /* –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            pointer-events: none;
            z-index: 1000;
        }

        @keyframes confettiFall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
        @media (max-width: 480px) {
            .card {
                padding: 24px 20px;
                margin: 10px;
            }

            h1 {
                font-size: 24px;
            }

            .gift {
                font-size: 64px;
            }

            .btn {
                padding: 14px 32px;
                font-size: 16px;
            }

            .postcard {
                padding: 28px 20px;
                margin: 10px;
            }

            .postcard h1 {
                font-size: 26px;
            }

            .postcard-emoji {
                font-size: 56px;
            }

            .postcard-text {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <!-- –§–æ–Ω–æ–≤—ã–µ —É–∫—Ä–∞—à–µ–Ω–∏—è -->
    <div class="bg-decorations" id="bg-decorations"></div>

    <!-- –≠–∫—Ä–∞–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è -->
    <div class="screen active" id="welcome-screen">
        <div class="card">
            <div class="gift">üéÅ</div>
            <h1>–ü—Ä–∏–≤–µ—Ç, –ø–æ–¥—Ä—É–∂–∫–∞! üíï</h1>
            <p>–£ –º–µ–Ω—è –µ—Å—Ç—å –¥–ª—è —Ç–µ–±—è –∫–æ–µ-—á—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ–µ...</p>
            <p>–ù–æ —Å–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ –º–∞–ª–µ–Ω—å–∫–æ–µ –∏—Å–ø—ã—Ç–∞–Ω–∏–µ! üéÆ</p>
            <div class="hint">
                <strong>üéØ –¢–≤–æ—è –∑–∞–¥–∞—á–∞:</strong><br>
                –õ–æ–≤–∏ –ø–∞–¥–∞—é—â–∏–µ —Å–µ—Ä–¥–µ—á–∫–∏!<br>
                –°–æ–±–µ—Ä–∏ 10 —à—Ç—É–∫ üíï
            </div>
            <button class="btn" onclick="startGame()">‚ú® –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∏–≥—Ä—ã -->
    <div class="screen" id="game-screen">
        <div class="game-header">
            <div class="game-title">üíï –õ–æ–≤–∏ —Å–µ—Ä–¥–µ—á–∫–∏!</div>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="score-display" id="score-display">0/10</div>
            </div>
        </div>
        <div class="game-area" id="game-area"></div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –æ—Ç–∫—Ä—ã—Ç–∫–∏ -->
    <div class="screen" id="card-screen">
        <div class="postcard">
            <div class="postcard-emoji">üíñ</div>
            <h1>–ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Ç–µ–±—è! üéâ</h1>
            <p class="postcard-text">
                –¢—ã ‚Äî —Å–∞–º–∞—è –ª—É—á—à–∞—è –ø–æ–¥—Ä—É–≥–∞ –Ω–∞ —Å–≤–µ—Ç–µ! 
                –°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ç—ã –µ—Å—Ç—å –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏. 
                –¢—ã –¥–µ–ª–∞–µ—à—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —è—Ä—á–µ –∏ –≤–µ—Å–µ–ª–µ–µ! 
                –ñ–µ–ª–∞—é —Ç–µ–±–µ —Å—á–∞—Å—Ç—å—è, –ª—é–±–≤–∏ –∏ –≤—Å–µ–≥–æ —Å–∞–º–æ–≥–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–≥–æ! 
                –õ—é–±–ª—é —Ç–µ–±—è! üíï‚ú®
            </p>
            <div class="postcard-footer">
                <span class="footer-emoji">üíñ</span>
                <span class="footer-emoji">üå∏</span>
                <span class="footer-emoji">‚ú®</span>
                <span class="footer-emoji">ü¶ã</span>
                <span class="footer-emoji">üíï</span>
            </div>
            <button class="btn" onclick="restartGame()">üîÑ –°—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑</button>
        </div>
    </div>

    <script>
        // –°–æ–∑–¥–∞—ë–º —Ñ–æ–Ω–æ–≤—ã–µ —É–∫—Ä–∞—à–µ–Ω–∏—è
        const decorations = ['‚ú®', 'üíï', 'üå∏', '‚≠ê', 'üí´', 'ü¶ã', 'üíñ'];
        const bgContainer = document.getElementById('bg-decorations');
        
        for (let i = 0; i < 15; i++) {
            const item = document.createElement('div');
            item.className = 'bg-item';
            item.textContent = decorations[Math.floor(Math.random() * decorations.length)];
            item.style.left = Math.random() * 100 + '%';
            item.style.top = Math.random() * 100 + '%';
            item.style.fontSize = (20 + Math.random() * 30) + 'px';
            item.style.animationDelay = Math.random() * 6 + 's';
            bgContainer.appendChild(item);
        }

        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let score = 0;
        const targetScore = 10;
        let gameActive = false;
        let hearts = [];
        let animationId = null;
        let spawnInterval = null;

        const heartEmojis = ['üíó', 'üíñ', 'üíï', 'üíù', '‚ù§Ô∏è', 'üíì', 'üíò', 'ü©∑', 'üíú', 'üß°'];

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }

        function startGame() {
            score = 0;
            hearts = [];
            gameActive = true;
            updateScore();
            showScreen('game-screen');
            
            // –û—á–∏—â–∞–µ–º –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ
            const gameArea = document.getElementById('game-area');
            gameArea.innerHTML = '';

            // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–ø–∞–≤–Ω —Å–µ—Ä–¥–µ—á–µ–∫
            spawnHeart();
            spawnInterval = setInterval(spawnHeart, 1400);

            // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
            gameLoop();
        }

        function spawnHeart() {
            if (!gameActive) return;

            const gameArea = document.getElementById('game-area');
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
            
            const size = 56 + Math.random() * 28; // 56-84px
            heart.style.fontSize = size + 'px';
            heart.style.left = (10 + Math.random() * 70) + '%';
            heart.style.top = '-80px';

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞/—Ç–∞–ø–∞
            const catchHeart = (e) => {
                e.preventDefault();
                e.stopPropagation();
                if (heart.classList.contains('caught')) return;
                
                heart.classList.add('caught');
                score++;
                updateScore();

                // –£–¥–∞–ª—è–µ–º –∏–∑ –º–∞—Å—Å–∏–≤–∞
                const index = hearts.findIndex(h => h.element === heart);
                if (index > -1) hearts.splice(index, 1);

                // –£–¥–∞–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
                setTimeout(() => {
                    if (heart.parentNode) heart.remove();
                }, 300);

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–±–µ–¥—É
                if (score >= targetScore) {
                    winGame();
                }
            };

            heart.addEventListener('click', catchHeart);
            heart.addEventListener('touchstart', catchHeart, { passive: false });

            gameArea.appendChild(heart);
            
            hearts.push({
                element: heart,
                y: -80,
                speed: 0.4 + Math.random() * 0.3 // 0.4-0.7
            });
        }

        function gameLoop() {
            if (!gameActive) return;

            const gameArea = document.getElementById('game-area');
            const maxY = window.innerHeight + 100;

            hearts.forEach((heart, index) => {
                heart.y += heart.speed;
                heart.element.style.top = heart.y + 'px';

                // –£–¥–∞–ª—è–µ–º –µ—Å–ª–∏ –≤—ã—à–ª–æ –∑–∞ —ç–∫—Ä–∞–Ω
                if (heart.y > maxY) {
                    heart.element.remove();
                    hearts.splice(index, 1);
                }
            });

            animationId = requestAnimationFrame(gameLoop);
        }

        function updateScore() {
            document.getElementById('score-display').textContent = score + '/' + targetScore;
            document.getElementById('progress-fill').style.width = (score / targetScore * 100) + '%';
        }

        function winGame() {
            gameActive = false;
            clearInterval(spawnInterval);
            cancelAnimationFrame(animationId);

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Ç–∫—Ä—ã—Ç–∫—É —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
            setTimeout(() => {
                showScreen('card-screen');
                createConfetti();
            }, 500);
        }

        function createConfetti() {
            const colors = ['#ec4899', '#8b5cf6', '#f472b6', '#a78bfa', '#fbbf24', '#34d399'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                    confetti.style.width = (8 + Math.random() * 8) + 'px';
                    confetti.style.height = (8 + Math.random() * 8) + 'px';
                    confetti.style.animation = `confettiFall ${3 + Math.random() * 2}s linear forwards`;
                    
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 5000);
                }, i * 50);
            }
        }

        function restartGame() {
            // –û—á–∏—â–∞–µ–º –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ
            const gameArea = document.getElementById('game-area');
            gameArea.innerHTML = '';
            hearts = [];
            
            showScreen('welcome-screen');
        }
    </script>
</body>
</html>
